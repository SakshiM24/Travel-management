{% extends 'base.html' %}
{% load static %}
{% block title %}Bus Enrollment{% endblock %}
{% block content %}

<section class="pt-28 pb-20 bg-gray-50 min-h-screen">
  <div class="max-w-5xl mx-auto bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-200">
    <div class="bg-blue-700 text-white py-6 px-8 flex justify-between items-center">
      <div>
        <h2 class="text-3xl font-semibold tracking-wide">Company Bus Enrollment Form</h2>
        <p class="text-sm opacity-90">Fill in your details carefully. Once submitted, admin approval is required.</p>
      </div>
      <img src="{% static 'images/AEQUS_logo.svg.png' %}" alt="Company Logo" class="w-16 h-16 square-full object-contain">
    </div>

    <form method="POST" enctype="multipart/form-data" class="p-8 space-y-8">
      {% csrf_token %}

      <!-- Personal Information -->
      <div>
        <h3 class="text-xl font-semibold text-blue-700 mb-4 border-b border-blue-200 pb-2">Personal Information</h3>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="block text-gray-600 font-medium">Full Name</label>
            <input type="text" name="name" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Photo</label>
            <input type="file" name="photo" accept="image/*" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Date of Birth</label>
            <input type="date" name="dob" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Gender</label>
            <select name="gender" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
              <option value="">Select Gender</option>
              <option>Male</option>
              <option>Female</option>
              <option>Other</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Email Address</label>
            <input type="email" name="email" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Contact Number</label>
            <input type="text" name="contact_no" required class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Alternate Number</label>
            <input type="text" name="alternate_no" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
        </div>
      </div>

      <!-- Address Information -->
      <div>
        <h3 class="text-xl font-semibold text-blue-700 mb-4 border-b border-blue-200 pb-2">Address Information</h3>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="block text-gray-600 font-medium">Present Address</label>
            <textarea name="present_address" rows="3" class="w-full p-2 border rounded-lg focus:outline-blue-600"></textarea>
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Permanent Address</label>
            <textarea name="permanent_address" rows="3" class="w-full p-2 border rounded-lg focus:outline-blue-600"></textarea>
          </div>
        </div>
      </div>

      <!-- Work Information -->
      <div>
        <h3 class="text-xl font-semibold text-blue-700 mb-4 border-b border-blue-200 pb-2">Work Information</h3>
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <label class="block text-gray-600 font-medium">Entity</label>
            <input type="text" name="entity" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Department</label>
            <input type="text" name="department" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Role Type</label>
            <select name="role" id="role" required class="w-full p-2 border rounded-lg focus:outline-blue-600" onchange="toggleEmpFields()">
              <option value="">Select</option>
              <option value="Employee">Employee</option>
              <option value="Intern">Intern</option>
            </select>
          </div>
          <div id="empIdField">
            <label class="block text-gray-600 font-medium">Employee ID</label>
            <input type="text" name="emp_id" id="emp_id" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div id="designationField">
            <label class="block text-gray-600 font-medium">Designation</label>
            <input type="text" name="designation" id="designation" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
            <label class="block text-gray-600 font-medium">Date of Joining</label>
            <input type="date" name="date_of_joining" class="w-full p-2 border rounded-lg focus:outline-blue-600">
          </div>
          <div>
           <label>Pickup / Drop Point</label>
<select name="pickup_drop_point" class="w-full p-2 border rounded-lg">
  <option value="">Select stop</option>
  {% for s in stops %}
    <option value="{{ s.id }}">{{ s.name }}</option>
  {% endfor %}
</select>

          </div>
          <div>
            <label class="block text-gray-600 font-medium">Working Type</label>
            <select name="working_type" class="w-full p-2 border rounded-lg focus:outline-blue-600">
              <option value="">Select</option>
              <option>General</option>
              <option> Shift</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Rules and Regulations -->
      <div class="flex items-center justify-between border-t border-gray-200 pt-6">
        <div class="flex items-center space-x-3">
          <input type="checkbox" id="agree" name="agree" required>
          <label for="agree" class="text-gray-700 text-sm">
            I agree to the <a href="{% url 'rules' %}" class="text-blue-600 hover:underline">company transport rules & regulations</a>.
          </label>
        </div>
      </div>

      <!-- Submit -->
      <div class="pt-6 text-center">
        <button type="submit" class="bg-blue-700 hover:bg-blue-800 text-white font-semibold px-10 py-3 rounded-xl shadow-lg transition">
          Submit Application
        </button>
      </div>
    </form>
  </div>
</section>

<script>
function toggleEmpFields() {
  const role = document.getElementById('role').value;
  const empId = document.getElementById('empIdField');
  const desig = document.getElementById('designationField');
  if (role === 'Intern') {
    empId.classList.add('hidden');
    desig.classList.add('hidden');
  } else {
    empId.classList.remove('hidden');
    desig.classList.remove('hidden');
  }
}
</script>

{% endblock %}
